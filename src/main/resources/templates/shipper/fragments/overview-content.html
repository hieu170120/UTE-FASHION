<!-- T·ªïng quan - Overview Content Fragment -->
<div xmlns:th="http://www.thymeleaf.org">
    <style>
        .overview-container {
            max-width: 1200px;
        }
        
        .profile-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 32px;
            text-align: center;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #667eea;
            margin-bottom: 16px;
        }
        
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card-overview {
            background: white;
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
        }
        
        .info-section {
            background: white;
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .info-section h4 {
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #E2E8F0;
        }
        
        .info-item {
            display: flex;
            padding: 12px 0;
            border-bottom: 1px solid #F1F5F9;
        }
        
        .info-item:last-child {
            border-bottom: none;
        }
        
        .info-label {
            flex: 0 0 200px;
            font-weight: 600;
            color: #64748B;
        }
        
        .info-value {
            flex: 1;
            color: #1E293B;
        }
        
        .edit-mode {
            display: none;
        }
        
        .edit-mode.active {
            display: block;
        }
        
        .view-mode.hidden {
            display: none;
        }
    </style>

    <div class="overview-container">
        <h2 style="margin-bottom: 24px; font-weight: 700; color: #1E293B;">üìä T·ªïng quan</h2>

        <!-- Profile Card -->
        <div class="profile-card">
            <div class="profile-avatar">
                <i class="fas fa-user"></i>
            </div>
            <h3 th:text="${shipper.fullName}">Shipper Name</h3>
            <p style="opacity: 0.9;">
                <i class="fas fa-id-badge"></i> Shipper ID: <span th:text="${shipper.id}">001</span>
            </p>
            <p style="opacity: 0.9;">
                <i class="fas fa-envelope"></i> <span th:text="${shipper.email}">email@example.com</span>
            </p>
        </div>

        <!-- Statistics -->
        <div class="stats-overview">
            <div class="stat-card-overview">
                <h3 style="font-size: 32px; font-weight: 700; color: #3B82F6;" th:text="${assignedCount}">0</h3>
                <p style="color: #64748B; font-size: 14px; margin-top: 8px;">
                    <i class="fas fa-clock"></i> ƒê∆°n ch·ªù x√°c nh·∫≠n
                </p>
            </div>
            <div class="stat-card-overview">
                <h3 style="font-size: 32px; font-weight: 700; color: #10B981;" th:text="${deliveringCount}">0</h3>
                <p style="color: #64748B; font-size: 14px; margin-top: 8px;">
                    <i class="fas fa-shipping-fast"></i> ƒêang giao
                </p>
            </div>
            <div class="stat-card-overview">
                <h3 style="font-size: 32px; font-weight: 700; color: #F59E0B;" th:text="${deliveredCount}">0</h3>
                <p style="color: #64748B; font-size: 14px; margin-top: 8px;">
                    <i class="fas fa-check-circle"></i> ƒê√£ giao h√¥m nay
                </p>
            </div>
            <div class="stat-card-overview">
                <h3 style="font-size: 32px; font-weight: 700; color: #EF4444;" th:text="${cancelCount}">0</h3>
                <p style="color: #64748B; font-size: 14px; margin-top: 8px;">
                    <i class="fas fa-times-circle"></i> ƒê√£ h·ªßy (Max: 3)
                </p>
            </div>
        </div>

        <!-- Personal Information -->
        <div class="info-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h4 style="margin: 0;"><i class="fas fa-user-circle"></i> Th√¥ng tin c√° nh√¢n</h4>
                <button onclick="toggleEditMode()" class="btn btn-primary" id="editBtn">
                    <i class="fas fa-edit"></i> C·∫≠p nh·∫≠t th√¥ng tin
                </button>
            </div>
            
            <!-- View Mode -->
            <div id="viewMode" class="view-mode">
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-user"></i> H·ªç v√† t√™n:</div>
                    <div class="info-value" th:text="${shipper.fullName}">Nguy·ªÖn VƒÉn A</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-envelope"></i> Email:</div>
                    <div class="info-value" th:text="${shipper.email}">email@example.com</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-phone"></i> S·ªë ƒëi·ªán tho·∫°i:</div>
                    <div class="info-value" th:text="${shipper.phoneNumber}">0123456789</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-motorcycle"></i> Lo·∫°i ph∆∞∆°ng ti·ªán:</div>
                    <div class="info-value" th:text="${shipper.vehicleType}">Xe m√°y</div>
                </div>
            </div>
            
            <!-- Edit Mode -->
            <div id="editMode" class="edit-mode">
                <form id="updateForm">
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-user"></i> H·ªç v√† t√™n</label>
                        <input type="text" class="form-control" th:value="${shipper.fullName}" name="fullName" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-phone"></i> S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" class="form-control" th:value="${shipper.phoneNumber}" name="phoneNumber" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label"><i class="fas fa-motorcycle"></i> Lo·∫°i ph∆∞∆°ng ti·ªán</label>
                        <select class="form-select" name="vehicleType">
                            <option value="Xe m√°y" th:selected="${shipper.vehicleType == 'Xe m√°y'}">Xe m√°y</option>
                            <option value="Xe √¥ t√¥" th:selected="${shipper.vehicleType == 'Xe √¥ t√¥'}">Xe √¥ t√¥</option>
                            <option value="Xe ƒë·∫°p" th:selected="${shipper.vehicleType == 'Xe ƒë·∫°p'}">Xe ƒë·∫°p</option>
                        </select>
                    </div>
                    <div class="d-flex gap-2">
                        <button type="button" onclick="saveChanges()" class="btn btn-success">
                            <i class="fas fa-save"></i> L∆∞u thay ƒë·ªïi
                        </button>
                        <button type="button" onclick="cancelEdit()" class="btn btn-secondary">
                            <i class="fas fa-times"></i> H·ªßy
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Recent Orders -->
        <div class="info-section">
            <h4><i class="fas fa-list"></i> ƒê∆°n h√†ng g·∫ßn ƒë√¢y</h4>
            
            <div th:if="${recentOrders.isEmpty()}" class="text-center py-4" style="color: #64748B;">
                <i class="fas fa-inbox fa-3x mb-3"></i>
                <p>Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o</p>
            </div>
            
            <div th:each="order : ${recentOrders}" class="info-item">
                <div style="flex: 1;">
                    <strong th:text="${order.orderNumber}">ORD-001</strong>
                    <br>
                    <small class="text-muted" th:text="${order.recipientName}">Kh√°ch h√†ng</small>
                </div>
                <div style="text-align: right;">
                    <strong style="color: #EF4444;" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'">100,000 ‚Ç´</strong>
                    <br>
                    <span class="badge bg-warning">Ch·ªù x√°c nh·∫≠n</span>
                </div>
            </div>
            
            <div th:if="${!recentOrders.isEmpty()}" class="text-center mt-3">
                <button onclick="loadContent('orders')" class="btn btn-primary">
                    <i class="fas fa-arrow-right"></i> Xem t·∫•t c·∫£ ƒë∆°n h√†ng
                </button>
            </div>
        </div>
    </div>

    <script>
        function toggleEditMode() {
            document.getElementById('viewMode').classList.add('hidden');
            document.getElementById('editMode').classList.add('active');
            document.getElementById('editBtn').style.display = 'none';
        }
        
        function cancelEdit() {
            document.getElementById('viewMode').classList.remove('hidden');
            document.getElementById('editMode').classList.remove('active');
            document.getElementById('editBtn').style.display = 'block';
        }
        
        function saveChanges() {
            if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën c·∫≠p nh·∫≠t th√¥ng tin?')) {
                return;
            }
            
            const form = document.getElementById('updateForm');
            const formData = new FormData(form);
            
            // TODO: Submit to server
            fetch('/UTE_Fashion/shipper/profile/update', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert('C·∫≠p nh·∫≠t th√†nh c√¥ng!');
                loadContent('overview'); // Reload
            })
            .catch(error => {
                alert('L·ªói: ' + error.message);
            });
        }
    </script>
</div>
