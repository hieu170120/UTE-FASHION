
<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <title>Danh sách sản phẩm</title>
    <th:block layout:fragment="styles">
        <style>
            body {
                background-color: #f5f5f5;
            }
            .product-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                gap: 1rem;
            }
            .product-card {
                background-color: #fff;
                border: 1px solid #e0e0e0;
                border-radius: 0.25rem;
                transition: box-shadow 0.3s ease;
                text-decoration: none;
                color: inherit;
            }
            .product-card:hover {
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }
            .product-card-img-top {
                width: 100%;
                height: 200px;
                object-fit: cover;
                border-top-left-radius: 0.25rem;
                border-top-right-radius: 0.25rem;
            }
            .product-card-body {
                padding: 1rem;
            }
            .product-card-title {
                font-size: 1rem;
                font-weight: 500;
                margin-bottom: 0.5rem;
                height: 40px; /* Two lines of text */
                overflow: hidden;
            }
            .product-price {
                color: #667eea;
                font-weight: bold;
                font-size: 1.1rem;
            }
            .view-details-btn {
                background-color: #667eea;
                color: #fff;
                border-color: #667eea;
            }
            .view-details-btn:hover {
                background-color: #5a6ed8;
                border-color: #5a6ed8;
            }
            .page-link {
                color: #667eea;
            }
            .page-item.active .page-link {
                z-index: 1;
                color: #fff;
                background-color: #667eea;
                border-color: #667eea;
            }
        </style>
    </th:block>
</head>
<body>

<div class="container-fluid mt-5" layout:fragment="content">

    <!-- Carousel Start -->
    <div id="header-carousel" class="carousel slide mb-4" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#header-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#header-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="w-100" src="https://theme.hstatic.net/200000182297/1000887316/14/ms_banner_img1_master.jpg?v=2776" alt="Another Banner">
            </div>
            <div class="carousel-item">
                <img class="w-100" src="https://theme.hstatic.net/200000182297/1000887316/14/ms_banner_img1_master.jpg?v=2776" alt="Another Banner">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#header-carousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#header-carousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <!-- Carousel End -->

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 th:text="${pageTitle} ?: 'Sản phẩm'"></h1>
        <form class="d-flex" th:action="@{/products}" method="get">
            <input class="form-control me-2" type="search" name="keyword" placeholder="Tìm kiếm sản phẩm..." aria-label="Search">
            <button class="btn btn-outline-primary" type="submit" style="white-space: nowrap;">Tìm kiếm</button>
        </form>
    </div>

    <div class="row">
        <!-- Sidebar for categories/filters -->
        <div class="col-lg-3">
            <div class="card mb-4">
                <div class="card-header">
                    <h4>Danh mục</h4>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" th:each="category : ${categories}">
                        <a th:href="@{/products/category/{slug}(slug=${category.slug})}" th:text="${category.categoryName}">Category Name</a>

                    </li>
                </ul>
            </div>
             <div class="card">
                <div class="card-header">
                    <h4>Thương hiệu</h4>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item" th:each="brand : ${brands}">
                        <a th:href="@{/products/brand/{slug}(slug=${brand.slug})}" th:text="${brand.brandName}">Brand Name</a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Product listing -->
        <div class="col-lg-9">
            <div class="product-grid">
                <a th:href="@{/products/{slug}(slug=${product.slug})}" class="product-card" th:each="product : ${productPage.content}">
                    <img th:src="${!#lists.isEmpty(product.images)} ? ${product.images[0].imageUrl} : 'https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=688'"
                         class="product-card-img-top"
                         th:alt="${product.productName}">
                    <div class="product-card-body">
                        <h5 class="product-card-title" th:text="${product.productName}">Tên sản phẩm</h5>
                        <p class="product-price" th:text="${#numbers.formatDecimal(product.basePrice, 0, 'COMMA', 0, 'POINT')} + ' VNĐ'">Giá sản phẩm</p>
                    </div>
                </a>
            </div>

            <!-- Pagination -->
            <nav aria-label="Page navigation" th:if="${productPage.totalPages > 1}" class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${productPage.first} ? 'disabled'">
                        <a class="page-link" th:href="@{/products(page=${productPage.number - 1}, size=${productPage.size}, keyword=${keyword})}">&laquo;</a>
                    </li>
                    <li class="page-item" th:each="pageNumber : ${#numbers.sequence(0, T(java.lang.Math).min(productPage.totalPages - 1, 9))}"
                        th:classappend="${pageNumber == productPage.number} ? 'active'">
                        <a class="page-link" th:href="@{/products(page=${pageNumber}, size=${productPage.size}, keyword=${keyword})}" th:text="${pageNumber + 1}"></a>
                    </li>
                    <li class="page-item" th:classappend="${productPage.last} ? 'disabled'">
                        <a class="page-link" th:href="@{/products(page=${productPage.number + 1}, size=${productPage.size}, keyword=${keyword})}">&raquo;</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

</body>
</html>
